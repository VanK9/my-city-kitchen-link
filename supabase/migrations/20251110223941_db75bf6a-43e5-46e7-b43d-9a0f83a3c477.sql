-- Add unique constraint to prevent duplicate entries for same date/contract
ALTER TABLE work_entries 
ADD CONSTRAINT work_entries_user_contract_date_unique 
UNIQUE (user_id, contract_id, entry_date);

-- Insert basic cooking technique tutorials
INSERT INTO tutorials (title, description, category, content, difficulty_level, duration, is_free, author_id)
VALUES 
  (
    'Βασικές Τεχνικές Κοπής',
    'Μάθετε τις θεμελιώδεις τεχνικές κοπής λαχανικών και κρεάτων που κάθε μάγειρας πρέπει να γνωρίζει.',
    'Βασικές Τεχνικές',
    '{"sections": [{"title": "Εισαγωγή", "content": "Οι σωστές τεχνικές κοπής είναι το θεμέλιο της μαγειρικής."}, {"title": "Julienne", "content": "Κόψιμο σε λεπτά, μακριά ραβδάκια."}, {"title": "Brunoise", "content": "Πολύ ψιλοκομμένα κυβάκια."}, {"title": "Chiffonade", "content": "Κόψιμο φύλλων σε λεπτές λωρίδες."}]}',
    1,
    15,
    true,
    NULL
  ),
  (
    'Τεχνικές Μαγειρέματος: Blanching',
    'Το blanching είναι μια βασική τεχνική για τη διατήρηση του χρώματος και της υφής των λαχανικών.',
    'Βασικές Τεχνικές',
    '{"sections": [{"title": "Τι είναι το Blanching", "content": "Βραχύχρονο βράσιμο ακολουθούμενο από ice bath."}, {"title": "Πότε το χρησιμοποιούμε", "content": "Για λαχανικά, πάστες, αποφλοίωση ντομάτας."}, {"title": "Βήματα", "content": "1. Βρασμένο νερό με αλάτι\n2. Βυθίστε τα λαχανικά\n3. Αφαιρέστε και βάλτε σε παγωμένο νερό"}]}',
    1,
    10,
    true,
    NULL
  ),
  (
    'Sautéing - Τηγάνισμα σε Υψηλή Φωτιά',
    'Μάθετε την τέχνη του σωστού τηγανίσματος για τέλεια καραμελοποίηση και υφή.',
    'Βασικές Τεχνικές',
    '{"sections": [{"title": "Προετοιμασία", "content": "Στεγνά υλικά, ζεστό τηγάνι, σωστό λάδι."}, {"title": "Θερμοκρασία", "content": "Υψηλή θερμοκρασία για καραμελοποίηση."}, {"title": "Συμβουλές", "content": "Μην υπερφορτώνετε το τηγάνι, κινήστε συχνά."}]}',
    2,
    12,
    true,
    NULL
  ),
  (
    'Braising - Βρασμός σε Χαμηλή Θερμοκρασία',
    'Η τεχνική του braising για τρυφερό κρέας που λιώνει στο στόμα.',
    'Βασικές Τεχνικές',
    '{"sections": [{"title": "Τι είναι το Braising", "content": "Συνδυασμός searing και αργού ψησίματος σε υγρό."}, {"title": "Ιδανικά Κομμάτια", "content": "Σκληρά κομμάτια κρέατος με συνδετικό ιστό."}, {"title": "Διαδικασία", "content": "1. Sear το κρέας\n2. Προσθέστε υγρό\n3. Μαγειρέψτε αργά σε χαμηλή θερμοκρασία"}]}',
    2,
    20,
    true,
    NULL
  ),
  (
    'Emulsions - Γαλακτώματα στη Μαγειρική',
    'Κατανοήστε την επιστήμη πίσω από τις σάλτσες όπως η μαγιονέζα και η hollandaise.',
    'Βασικές Τεχνικές',
    '{"sections": [{"title": "Τι είναι Emulsion", "content": "Ανάμειξη υγρών που φυσιολογικά δεν αναμειγνύονται."}, {"title": "Σταθεροποιητές", "content": "Κρόκος αυγού, μουστάρδα, μέλι."}, {"title": "Παραδείγματα", "content": "Μαγιονέζα, vinaigrette, hollandaise, beurre blanc."}]}',
    3,
    18,
    true,
    NULL
  ),
  (
    'Mise en Place - Οργάνωση στην Κουζίνα',
    'Η σημασία της προετοιμασίας και οργάνωσης πριν το μαγείρεμα.',
    'Βασικές Τεχνικές',
    '{"sections": [{"title": "Τι σημαίνει", "content": "Everything in its place - Ετοιμάστε τα πάντα πριν αρχίσετε."}, {"title": "Πλεονεκτήματα", "content": "Λιγότερο στρες, καλύτερα αποτελέσματα, καθαρότητα."}, {"title": "Πώς εφαρμόζεται", "content": "Διαβάστε τη συνταγή, κόψτε όλα τα υλικά, μετρήστε, οργανώστε."}]}',
    1,
    8,
    true,
    NULL
  ),
  (
    'Deglazing - Τεχνική Απογλασαρίσματος',
    'Μάθετε πώς να δημιουργείτε πλούσιες σάλτσες από τα καραμελοποιημένα υπολείμματα.',
    'Βασικές Τεχνικές',
    '{"sections": [{"title": "Τι είναι", "content": "Προσθήκη υγρού για να διαλυθούν τα fond (καραμελοποιημένα κομμάτια)."}, {"title": "Υγρά", "content": "Κρασί, ζωμός, ξύδι, χυμός."}, {"title": "Διαδικασία", "content": "Αφαιρέστε το κρέας, προσθέστε υγρό, ξύστε τον πάτο, μειώστε."}]}',
    2,
    10,
    true,
    NULL
  ),
  (
    'Seasoning - Η Τέχνη του Καρυκεύματος',
    'Πότε και πώς να προσθέτετε αλάτι και μπαχαρικά για μέγιστη γεύση.',
    'Βασικές Τεχνικές',
    '{"sections": [{"title": "Στρώματα γεύσης", "content": "Προσθέτουμε καρυκεύματα σε διάφορα στάδια."}, {"title": "Αλάτι", "content": "Πότε προσθέτουμε: κατά το μαγείρεμα και στο τέλος."}, {"title": "Ισορροπία", "content": "Γλυκό, αλμυρό, ξινό, πικρό, umami."}]}',
    1,
    12,
    true,
    NULL
  )